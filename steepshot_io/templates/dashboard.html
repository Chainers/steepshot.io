{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages': ['line']});
        google.charts.setOnLoadCallback(drawChart);

        var name = data_steem;
        function drawChart() {
            var data1 = new google.visualization.DataTable();
            {% for itm in data.0.headers %}
                {% for k, v in itm.items %}
                    data1.addColumn('{{ v }}', '{{ k }}');
                {% endfor %}
            {% endfor %}
            data1.addRows([
                {% for i in data.0.data_steem %}
                    [
                        {% for j in i %}
                            '{{ j }}',
                        {% endfor %}
                    ].map((itm, idx) => { if (idx === 0) return itm; else return parseFloat(itm)}),
                {% endfor %}
            ]);

            var data2 = new google.visualization.DataTable();
            {% for itm in data.1.headers %}
                {% for k, v in itm.items %}
                    data2.addColumn('{{ v }}', '{{ k }}');
                {% endfor %}
            {% endfor %}
            data2.addRows([
                {% for i in data.1.data_steem %}
                    [
                        {% for j in i %}
                            '{{ j }}',
                        {% endfor %}
                    ].map((itm, idx) => { if (idx === 0) return itm; else return parseFloat(itm)}),
                {% endfor %}
            ]);

            var data3 = new google.visualization.DataTable();
            {% for itm in data.2.headers %}
                {% for k, v in itm.items %}
                    data3.addColumn('{{ v }}', '{{ k }}');
                {% endfor %}
            {% endfor %}
            data3.addRows([
                {% for i in data.2.data_steem %}
                    [
                        {% for j in i %}
                            '{{ j }}',
                        {% endfor %}
                    ].map((itm, idx) => { if (idx === 0) return itm; else return parseFloat(itm)}),
                {% endfor %}
            ]);

            var options = {
                chart: {
                    title: '{{ data.0.title }}',
                    subtitle: '{{ subtitle }}'
                },
                width: window.innerWidth * 0.45,
                height: window.innerHeight * 0.45,
                vAxis: {
                    title: '{{  data.0.title }}',
                    format: 'decimal',
                    textStyle: {
                        fontSize: 16
                    }
                },
                hAxis: {
                    gridlines: { count: 1 },
                    textStyle: {
                        fontSize: 16
                    }
                }
            };

            var options2 = {
                chart: {
                    title: '{{ data.1.title }}',
                    subtitle: '{{ subtitle }}'
                },
                width: window.innerWidth * 0.45,
                height: window.innerHeight * 0.45,
                vAxis: {
                    title: '{{  data.1.title }}',
                    format: 'decimal',
                    textStyle: {
                        fontSize: 16
                    }
                },
                hAxis: {
                    gridlines: { count: 1 },
                    textStyle: {
                        fontSize: 16
                    }
                }
            };

            var options3 = {
                chart: {
                    title: '{{ data.2.title }}',
                    subtitle: '{{ subtitle }}'
                },
                width: window.innerWidth * 0.45,
                height: window.innerHeight * 0.45,
                vAxis: {
                    title: '{{  data.2.title }}',
                    format: 'decimal',
                    textStyle: {
                        fontSize: 16
                    }
                },
                hAxis: {
                    gridlines: { count: 1 },
                    textStyle: {
                        fontSize: 16
                    }
                }
            };


            var chart = new google.charts.Line(document.getElementById('chart_div'));
            google.visualization.events.addListener(chart, 'error', function (googleError) {
                google.visualization.errors.removeError(googleError.id);
                document.getElementById("error_msg").innerHTML = "No data to display";
            });
            chart.draw(data1, google.charts.Line.convertOptions(options));
            var chart2 = new google.charts.Line(document.getElementById('chart_div2'));
            chart2.draw(data2, google.charts.Line.convertOptions(options2));
            var chart3 = new google.charts.Line(document.getElementById('chart_div3'));
            chart3.draw(data3, google.charts.Line.convertOptions(options3));
        }
        function radio(id)
    {
        name = document.getElementsByName("myRadio");
      alert(id);
      name.value = id
    }
    </script>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="{% static 'css/main.css' %}?v=20170707">
</head>
<body>

<span id="error_msg"></span>
<form>
  <input type="radio" name="myRadio" id="myRadio" onclick="radio('data_steem')" value="data_steem" checked> Steem<br>
  <input type="radio" name="myRadio" id="myRadio" onclick="radio('data_golos')" value="data_golos"> Golos<br>
  <input type="radio" name="myRadio" id="myRadio" onclick="radio('data_sum')" value="data_sum"> Sum
</form>

  <div class="grid-dashboard">
      <div id="chart_div"></div>
  </div>
  <div class="grid-dashboard">
      <div id="chart_div2"></div>
  </div>
  <div class="grid-dashboard">
      <div id="chart_div3"></div>
  </div>
</body>
</html>
